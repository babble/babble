<?xml version='1.0'?>
<project name="appserver test" default="all" basedir=".">

  <property name="targetdir" value="target"/>
  <property name="testdir" value="${targetdir}/test"/>
  
  <path id="classpath">
    <fileset dir="include">
      <include name="**/*.jar"/>
    </fileset>
    <pathelement path="conf" />
    <pathelement path="build" />
  </path>

    <taskdef name="testng" classpathref="classpath"
              classname="org.testng.TestNGAntTask" />

    <target name="all" depends="run-basic, corejs, run-db"/>
    
  <target  name="run-basic" depends="init">      

    <testng classpathref="classpath" outputdir="${testdir}" listeners="ed.TestNGListener" haltonfailure="true" >
      <xmlfileset dir="." includes="testng.xml"/>
    </testng>
  </target>

  <target  name="run-db" depends="init">      

    <testng classpathref="classpath" outputdir="${testdir}" listeners="ed.TestNGListener" haltonfailure="true">
      <xmlfileset dir="." includes="testng-db.xml"/>
      <jvmarg value="-Xmx1000m" />
    </testng>
  </target>

    <target  name="corejs" depends="init">      

      <testng classpathref="classpath" outputdir="${testdir}" listeners="ed.TestNGListener" haltonfailure="true" >
        <xmlfileset dir="." includes="testng-corejs.xml"/>
      </testng>
    </target>

  <target name="init">
    <mkdir dir="${testdir}" />
  </target>

</project>
